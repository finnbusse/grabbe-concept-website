# Grabbe-Gymnasium Detmold - Homepage Rebranding

### Documentation is generated by Claude Sonnet 4.6

Modern website for Grabbe-Gymnasium Detmold built with Next.js, TypeScript, and Supabase.

## ğŸš€ Tech Stack

- **Framework**: [Next.js 16](https://nextjs.org/) with App Router
- **Language**: [TypeScript](https://www.typescriptlang.org/)
- **Styling**: [Tailwind CSS](https://tailwindcss.com/)
- **UI Components**: [shadcn/ui](https://ui.shadcn.com/)
- **Database**: [Supabase](https://supabase.com/) (PostgreSQL)
- **Storage**: [Vercel Blob](https://vercel.com/docs/storage/vercel-blob)
- **Deployment**: [Vercel](https://vercel.com/)

## ğŸ“¦ Features

- ğŸ“° News/Blog system (Aktuelles)
- ğŸ“… Event calendar (Termine)
- ğŸ“„ Static pages with CMS
- ğŸ“¥ Download center for documents
- ğŸ§­ Dynamic navigation system
- ğŸ“§ Contact form
- ğŸ“ School enrollment form (Anmeldung)
- âš™ï¸ Site-wide settings management
- ğŸ” Authentication with Supabase Auth
- ğŸ¨ Modern, responsive design
- â™¿ Accessibility-focused

## ğŸ—„ï¸ Database Structure

The project uses a PostgreSQL database hosted on Supabase with 8 main tables:

### Core Content Tables

1. **pages** - Static pages (Impressum, Ãœber uns, etc.)
2. **posts** - News articles and blog posts
3. **events** - School calendar and events
4. **documents** - Downloadable files (PDFs, documents)

### System Tables

5. **navigation_items** - Hierarchical navigation (header/footer)
6. **site_settings** - Key-value configuration store

### Submission Tables

7. **contact_submissions** - Contact form entries
8. **anmeldung_submissions** - School enrollment applications

For detailed schema information, see [`scripts/README.md`](./scripts/README.md).

## ğŸ› ï¸ Development Setup

### Prerequisites

- Node.js 18+ and npm/pnpm
- A Supabase account and project
- (Optional) Vercel account for deployment

### Installation

1. **Clone the repository**

   ```bash
   git clone https://github.com/finnbusse/cdggy-dt-homepage-rebranding.git
   cd cdggy-dt-homepage-rebranding
   ```

2. **Install dependencies**

   ```bash
   npm install --legacy-peer-deps
   # or
   pnpm install
   ```

3. **Set up environment variables**

   Copy `.env.example` to `.env.local` and fill in your Supabase credentials:

   ```bash
   cp .env.example .env.local
   ```

   Edit `.env.local`:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
   ```

   Get these values from your Supabase project settings â†’ API.

4. **Set up the database**

   Follow the instructions in [`DEPLOYMENT.md`](./DEPLOYMENT.md) to set up your database schema in Supabase.

5. **Run the development server**

   ```bash
   npm run dev
   ```

   Open [http://localhost:3000](http://localhost:3000) to see your application.

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ app/                    # Next.js App Router pages
â”‚   â”œâ”€â”€ aktuelles/         # News/blog pages
â”‚   â”œâ”€â”€ api/               # API routes
â”‚   â”œâ”€â”€ cms/               # CMS admin interface
â”‚   â””â”€â”€ ...
â”œâ”€â”€ components/            # React components
â”‚   â”œâ”€â”€ ui/               # shadcn/ui components
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib/                   # Utility functions and helpers
â”‚   â”œâ”€â”€ supabase/         # Supabase client configuration
â”‚   â”œâ”€â”€ types/            # TypeScript type definitions
â”‚   â”œâ”€â”€ db-helpers.ts     # Database query helpers
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/              # Database migration scripts
â”‚   â”œâ”€â”€ complete_schema.sql
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ public/               # Static assets
â””â”€â”€ styles/              # Global styles
```

## ğŸ—ƒï¸ Database Usage

### TypeScript Types

All database tables have TypeScript type definitions in `lib/types/database.types.ts`:

```typescript
import type { Page, Post, Event } from '@/lib/types/database.types'
```

### Query Helpers

Use the pre-built query helpers from `lib/db-helpers.ts`:

```typescript
import { 
  getPublishedPosts, 
  getUpcomingEvents,
  getNavigationItems 
} from '@/lib/db-helpers'

// Get latest posts
const posts = await getPublishedPosts(10)

// Get upcoming events
const events = await getUpcomingEvents()

// Get navigation
const nav = await getNavigationItems('header')
```

### Direct Database Access

For custom queries, use the typed Supabase client:

```typescript
import { createClient } from '@/lib/supabase/server'

const supabase = await createClient()

const { data, error } = await supabase
  .from('posts')
  .select('*')
  .eq('published', true)
  .limit(5)
```

## ğŸš¢ Deployment

### Vercel Deployment

This project is optimized for deployment on Vercel:

1. **Connect your repository** to Vercel
2. **Set environment variables** in Vercel project settings:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
3. **Deploy**

For detailed database deployment instructions, see [`DEPLOYMENT.md`](./DEPLOYMENT.md).

### Database Deployment

The database schema needs to be applied to your Supabase project:

1. Go to Supabase SQL Editor
2. Run the contents of `scripts/complete_schema.sql`
3. Verify all tables are created

See [`DEPLOYMENT.md`](./DEPLOYMENT.md) for complete instructions.

## ğŸ”’ Security

- **Row Level Security (RLS)** enabled on all tables
- **Authentication** via Supabase Auth
- **Protected routes** with middleware
- **Form validation** with Zod schemas
- **XSS protection** through React's built-in escaping

## ğŸ“ Scripts

- `npm run dev` - Start development server with Turbopack
- `npm run build` - Build for production
- `npm run start` - Start production server
- `npm run lint` - Run ESLint

## ğŸ¤ Contributing

1. Create a feature branch (`git checkout -b feature/amazing-feature`)
2. Commit your changes (`git commit -m 'Add amazing feature'`)
3. Push to the branch (`git push origin feature/amazing-feature`)
4. Open a Pull Request

## ğŸ“š Documentation

- [Database Schema Documentation](./scripts/README.md)
- [Deployment Guide](./DEPLOYMENT.md)
- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [shadcn/ui Documentation](https://ui.shadcn.com)

## ğŸ“„ License

This project is proprietary software for Grabbe-Gymnasium Detmold.

## ğŸ‘¨â€ğŸ’» Developed By

Finn Busse

---

For questions or support, please contact the development team.
